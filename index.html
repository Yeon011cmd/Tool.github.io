<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>적정 주가 계산기</title>
    <style>
        body {
            font-family: Arial;
            max-width: 700px;
            margin: 40px auto;
            padding: 20px;
        }
        h2 {
            border-bottom: 1px solid #ccc;
            padding-bottom: 5px;
        }
        input {
            width: 100%;
            padding: 8px;
            margin: 5px 0 15px 0;
        }
        button {
            padding: 10px;
            width: 100%;
            cursor: pointer;
            margin-bottom: 10px;
        }
        .result {
            margin-top: 10px;
            font-weight: bold;
        }
        .note {
            margin-top: 40px;
            font-size: 13px;
            color: gray;
        }
    </style>
</head>
<body>

<h1>주식 적정가 계산기</h1>

<h2>1. PER 기반 예상 주가</h2>
<label>EPS (주당순이익)</label>
<input type="number" id="eps">

<label>목표 PER</label>
<input type="number" id="per">

<button onclick="calculatePER()">계산하기</button>

<div class="result" id="perResult"></div>


<h2>2. PEG 계산 (성장 대비 밸류에이션 점검)</h2>
<label>현재 PER</label>
<input type="number" id="currentPER">

<label>예상 성장률 (%)</label>
<input type="number" id="growthRate">

<button onclick="calculatePEG()">PEG 계산</button>

<div class="result" id="pegResult"></div>


<h2>3. 안전마진 적용 매수가</h2>
<label>안전마진 (%)</label>
<input type="number" id="margin" placeholder="예: 20">

<button onclick="calculateMargin()">안전마진 적용</button>

<div class="result" id="marginResult"></div>


<div class="note">
본 계산기는 원(₩) 기준으로 설계되었습니다. 
달러 기준 종목은 환율을 고려하여 입력하시기 바랍니다.
</div>


<script>
let fairPrice = 0;

function calculatePER() {
    const eps = parseFloat(document.getElementById("eps").value);
    const per = parseFloat(document.getElementById("per").value);

    if (isNaN(eps) || isNaN(per)) {
        alert("EPS와 PER을 모두 입력하세요");
        return;
    }

    fairPrice = eps * per;

    document.getElementById("perResult").innerHTML =
        "예상 적정 주가: " + fairPrice.toLocaleString() + " 원";
}

function calculatePEG() {
    const per = parseFloat(document.getElementById("currentPER").value);
    const growth = parseFloat(document.getElementById("growthRate").value);

    if (isNaN(per) || isNaN(growth) || growth === 0) {
        alert("PER과 성장률을 정확히 입력하세요");
        return;
    }

    const peg = per / growth;

    let interpretation = "";

    if (peg < 1) {
        interpretation = "PEG 1 미만 → 성장 대비 저평가 가능성";
    } else if (peg >= 1 && peg <= 2) {
        interpretation = "PEG 1~2 → 성장 대비 합리적 수준";
    } else {
        interpretation = "PEG 2 초과 → 성장 대비 고평가 가능성";
    }

    document.getElementById("pegResult").innerHTML =
        "PEG 값: " + peg.toFixed(2) + "<br>" + interpretation;
}

function calculateMargin() {
    const margin = parseFloat(document.getElementById("margin").value);

    if (fairPrice === 0) {
        alert("먼저 PER 기반 적정 주가를 계산하세요");
        return;
    }

    if (isNaN(margin)) {
        alert("안전마진을 입력하세요");
        return;
    }

    const buyPrice = fairPrice * (1 - margin / 100);

    document.getElementById("marginResult").innerHTML =
        "안전마진 적용 매수가: " + buyPrice.toLocaleString() + " 원";
}
</script>

</body>
</html>
